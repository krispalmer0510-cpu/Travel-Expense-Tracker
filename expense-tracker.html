<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Expense Tracker</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #e8f4f8 0%, #d4e7ed 100%); min-height: 100vh; padding: 10px; }
        .container { max-width: 400px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); overflow: hidden; }
        .header { background: linear-gradient(135deg, #7db8a6, #6ba594); color: white; padding: 20px; text-align: center; }
        .header h1 { font-size: 24px; margin-bottom: 5px; }
        .header p { opacity: 0.9; font-size: 14px; }
        .form { padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; color: #333; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 16px; transition: border-color 0.3s; -webkit-appearance: none; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #7db8a6; }
        .amount-group { display: flex; gap: 10px; }
        .currency-select { flex: 0 0 80px; }
        .amount-input { flex: 1; }
        textarea { resize: vertical; min-height: 60px; }
        .btn { width: 100%; padding: 16px; background: linear-gradient(135deg, #7db8a6, #6ba594); color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-bottom: 10px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(125, 184, 166, 0.3); }
        .btn:active { transform: translateY(0); }
        .btn-secondary { background: linear-gradient(135deg, #8db4d1, #7ba3c0); }
        .btn-secondary:hover { box-shadow: 0 5px 15px rgba(141, 180, 209, 0.3); }
        .expenses-list { margin-top: 15px; max-height: 250px; overflow-y: auto; }
        .expense-item { background: #f8fafa; border-radius: 8px; padding: 10px; margin-bottom: 8px; border-left: 4px solid #7db8a6; }
        .expense-date { font-size: 12px; color: #666; margin-bottom: 3px; }
        .expense-amount { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 3px; }
        .expense-description { font-size: 14px; color: #555; }
        .stats { display: flex; justify-content: space-between; background: #f0f0f0; padding: 12px; margin: 12px 0; border-radius: 8px; font-size: 14px; }
        .stat-item { text-align: center; }
        .stat-value { font-weight: bold; font-size: 16px; color: #6ba594; }
        .export-area { margin-top: 15px; padding: 12px; background: #f8f9fa; border-radius: 8px; border: 1px dashed #ddd; }
        .export-text { width: 100%; height: 120px; font-family: monospace; font-size: 12px; border: 1px solid #ddd; border-radius: 5px; padding: 10px; background: white; }
        .hidden { display: none; }
        .success-message { background: #e8f5f1; color: #2d5a4b; padding: 10px; border-radius: 5px; margin-bottom: 10px; text-align: center; font-weight: 500; }
        @media (max-width: 480px) {
            body { padding: 5px; }
            .header h1 { font-size: 20px; }
            .form { padding: 15px; }
            input, select, textarea { padding: 10px; font-size: 16px; }
            .btn { padding: 14px; font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Quick Expense</h1>
            <p>Log expenses on the go - works offline!</p>
        </div>
        <div class="form">
            <div id="successMessage" class="success-message hidden">Expense added successfully!</div>
            <form id="expenseForm">
                <div class="form-group">
                    <label for="date">Date</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label for="amount">Amount</label>
                    <div class="amount-group">
                        <select id="currency" class="currency-select" required>
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="AUD">AUD</option>
                            <option value="CAD">CAD</option>
                            <option value="CHF">CHF</option>
                            <option value="CNY">CNY</option>
                            <option value="INR">INR</option>
                            <option value="KRW">KRW</option>
                            <option value="SGD">SGD</option>
                            <option value="THB">THB</option>
                            <option value="MXN">MXN</option>
                            <option value="BRL">BRL</option>
                            <option value="ZAR">ZAR</option>
                        </select>
                        <input type="number" id="amount" class="amount-input" step="0.01" placeholder="0.00" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="paymentType">Payment Type</label>
                    <select id="paymentType" required>
                        <option value="Cash">Cash</option>
                        <option value="Card">Card</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" placeholder="What did you buy?" required></textarea>
                </div>
                <button type="submit" class="btn">Add Expense</button>
            </form>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalExpenses">0</div>
                    <div>Expenses</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalAmount">0</div>
                    <div>Total</div>
                </div>
            </div>

            <button id="exportBtn" class="btn btn-secondary">Copy for Notion</button>
            <button id="downloadCsvBtn" class="btn btn-secondary">Download CSV</button>
            <button id="clearBtn" class="btn" style="background: #c19a9a;">Clear All</button>

            <div id="exportArea" class="export-area hidden">
                <label for="exportText"><strong>Copy this to your Notion expense tracker:</strong></label>
                <textarea id="exportText" class="export-text" readonly></textarea>
                <button id="copyBtn" class="btn" style="margin-top: 10px;">Copy to Clipboard</button>
            </div>

            <div class="expenses-list" id="expensesList"></div>
        </div>
    </div>

    <script>
        class ExpenseTracker {
            constructor() {
                this.expenses = this.loadExpenses();
                this.initializeForm();
                this.updateDisplay();
                this.setDefaultDate();
            }

            loadExpenses() {
                const stored = localStorage.getItem('quickExpenses');
                return stored ? JSON.parse(stored) : [];
            }

            saveExpenses() {
                localStorage.setItem('quickExpenses', JSON.stringify(this.expenses));
            }

            setDefaultDate() {
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('date').value = today;
            }

            initializeForm() {
                const form = document.getElementById('expenseForm');
                const exportBtn = document.getElementById('exportBtn');
                const clearBtn = document.getElementById('clearBtn');
                const copyBtn = document.getElementById('copyBtn');
                const downloadBtn = document.getElementById('downloadCsvBtn');

                form.addEventListener('submit', (e) => this.handleSubmit(e));
                exportBtn.addEventListener('click', () => this.showExport());
                clearBtn.addEventListener('click', () => this.clearAll());
                copyBtn.addEventListener('click', () => this.copyToClipboard());
                downloadBtn.addEventListener('click', () => this.downloadCSV());
            }

            handleSubmit(e) {
                e.preventDefault();

                const expense = {
                    id: Date.now(),
                    date: document.getElementById('date').value,
                    currency: document.getElementById('currency').value,
                    amount: parseFloat(document.getElementById('amount').value),
                    paymentType: document.getElementById('paymentType').value,
                    description: document.getElementById('description').value.trim(),
                    timestamp: new Date().toISOString()
                };

                this.expenses.unshift(expense);
                this.saveExpenses();
                this.updateDisplay();
                this.resetForm();
                this.showSuccess();
            }

            resetForm() {
                document.getElementById('amount').value = '';
                document.getElementById('description').value = '';
            }

            showSuccess() {
                const message = document.getElementById('successMessage');
                message.classList.remove('hidden');
                setTimeout(() => { message.classList.add('hidden'); }, 2000);
            }

            updateDisplay() {
                this.updateStats();
                this.updateExpensesList();
            }

            updateStats() {
                const totalExpenses = this.expenses.length;
                const totalAmount = this.expenses.reduce((sum, exp) => sum + exp.amount, 0);
                document.getElementById('totalExpenses').textContent = totalExpenses;
                document.getElementById('totalAmount').textContent = totalAmount.toFixed(2);
            }

            updateExpensesList() {
                const list = document.getElementById('expensesList');
                if (!this.expenses.length) {
                    list.innerHTML = '<p style="text-align:center;color:#666;padding:20px;">No expenses yet.</p>';
                    return;
                }
                list.innerHTML = this.expenses.map(exp => `
                    <div class="expense-item">
                        <div class="expense-date">${this.formatDate(exp.date)}</div>
                        <div class="expense-amount">${exp.currency} ${exp.amount.toFixed(2)} (${exp.paymentType})</div>
                        <div class="expense-description">${exp.description}</div>
                    </div>
                `).join('');
            }

            formatDate(dateString) {
                return new Date(dateString + 'T00:00:00').toLocaleDateString('en-US', {
                    weekday: 'short', year: 'numeric', month: 'short', day: 'numeric'
                });
            }

            showExport() {
                const exportArea = document.getElementById('exportArea');
                const exportText = document.getElementById('exportText');
                if (!this.expenses.length) { alert('No expenses to export!'); return; }
                const formatted = this.expenses.map(exp => `${exp.date} | ${exp.currency} ${exp.amount.toFixed(2)} | ${exp.paymentType} | ${exp.description}`).join('\n');
                exportText.value = formatted;
                exportArea.classList.remove('hidden');
                exportText.focus();
                exportText.select();
            }

            async copyToClipboard() {
                const exportText = document.getElementById('exportText');
                try { await navigator.clipboard.writeText(exportText.value); alert('Copied!'); }
                catch { exportText.select(); document.execCommand('copy'); alert('Copied!'); }
            }

            clearAll() {
                if (confirm('Clear all expenses? This cannot be undone.')) {
                    this.expenses = [];
                    this.saveExpenses();
                    this.updateDisplay();
                    document.getElementById('exportArea').classList.add('hidden');
                }
            }

            downloadCSV() {
                if (!this.expenses.length) { alert('No expenses to export!'); return; }
                const headers = ['Date','Currency','Amount','Payment Type','Description'];
                const csvRows = [headers.join(',')];
                this.expenses.forEach(exp => {
                    const row = [exp.date, exp.currency, exp.amount.toFixed(2), exp.paymentType, `"${exp.description.replace(/"/g,'""')}"`];
                    csvRows.push(row.join(','));
                });
                const csvContent = csvRows.join('\n');
                const blob = new Blob([csvContent], {type: 'text/csv'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'expenses.csv';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        }

        document.addEventListener('DOMContentLoaded', () => { new ExpenseTracker(); });
    </script>
</body>
</html>
